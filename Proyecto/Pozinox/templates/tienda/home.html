{% extends 'base.html' %}
{% load static %}

{% block title %}{{ titulo }}{% endblock %}

{% block extra_css %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        opacity: 0.3;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }
    
    .feature-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: none;
        border-radius: 15px;
        overflow: hidden;
    }
    
    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .product-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: none;
        border-radius: 15px;
        overflow: hidden;
    }
    
    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    
    .stats-section {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    }
    
    .stat-item {
        text-align: center;
        padding: 2rem 1rem;
    }
    
    .stat-number {
        font-size: 3rem;
        font-weight: bold;
        color: #1e3a8a;
        display: block;
    }
    
    .category-card {
        background: white;
        border-radius: 15px;
        padding: 2rem 1rem;
        text-align: center;
        transition: transform 0.3s ease;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        min-width: 220px;
        max-width: 220px;
        min-height: 320px;
        max-height: 320px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin-left: 12px;
        margin-right: 12px;
        overflow: hidden;
    }
    .category-card:hover {
        transform: translateY(-10px);
    }
    .category-icon {
        font-size: 3rem;
        color: #1e3a8a;
        margin-bottom: 1rem;
    }
    .category-title {
        font-size: 1.35rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }
    .category-desc {
        font-size: 0.80rem;
        color: #6c757d;
        margin-bottom: 1rem;
        text-align: center;
        max-height: 60px;
        overflow: auto;
        white-space: normal;
        line-height: 1.3;
    }
    
    .cta-section {
        background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        color: white;
    }
    
    .floating-elements {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
    }
    
    .floating-element {
        position: absolute;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="floating-elements">
        <div class="floating-element" style="width: 80px; height: 80px; top: 20%; left: 10%; animation-delay: 0s;"></div>
        <div class="floating-element" style="width: 60px; height: 60px; top: 60%; right: 15%; animation-delay: 2s;"></div>
        <div class="floating-element" style="width: 100px; height: 100px; bottom: 20%; left: 20%; animation-delay: 4s;"></div>
    </div>
    
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 hero-content">
                <h1 class="display-4 fw-bold mb-4">
                    Tu Tienda de <span class="text-warning">Aceros</span><br>
                    de Confianza
                </h1>
                <p class="lead mb-4">
                    Especialistas en productos de acero de alta calidad. Más de 2 años sirviendo a la industria.
                </p>
                <div class="d-flex flex-wrap gap-3">
                    <a href="{% url 'productos' %}" class="btn btn-warning btn-lg px-4 py-3">
                        <i class="fas fa-shopping-cart me-2"></i>Ver Productos
                    </a>
                    <a href="#contacto" class="btn btn-outline-light btn-lg px-4 py-3">
                        <i class="fas fa-phone me-2"></i>Contactar
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="text-center">
                    <i class="fas fa-industry" style="font-size: 15rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-award text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Calidad Garantizada</h5>
                        <p class="card-text text-muted">
                            Todos nuestros productos cumplen con los más altos estándares 
                            de calidad y certificaciones internacionales.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-truck text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Entrega Rápida</h5>
                        <p class="card-text text-muted">
                            Servicio de entrega a domicilio en Santiago y regiones. 
                            Garantizamos entrega en tiempo y forma.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card card h-100">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-tools text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Servicios Adicionales</h5>
                        <p class="card-text text-muted">
                            Corte, doblado, soldadura y asesoría técnica especializada 
                            para todos nuestros productos.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-4 col-sm-5 ">
                <div class="stat-item">
                    <span class="stat-number">2+</span>
                    <p class="text-muted mb-0">Años de Experiencia</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-5 ">
                <div class="stat-item">
                    <span class="stat-number">100+</span>
                    <p class="text-muted mb-0">Productos Disponibles</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-5 ">
                <div class="stat-item">
                    <span class="stat-number">1000+</span>
                    <p class="text-muted mb-0">Clientes Satisfechos</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section id="productos" class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="display-5 fw-bold mb-3">Nuestros Productos</h2>
                <p class="lead text-muted">
                    Amplia variedad de productos de acero para todas tus necesidades
                </p>
            </div>
        </div>
        
    <div class="row justify-content-center" style="gap: 24px;">
            <div class="col-lg-2 col-md-4">
                <div class="category-card">
                    <div class="category-icon">
                        <!-- Estante de laboratorio (Sanitarios) -->
                        <i class="fas fa-vials" style="color:#1e3a8a;"></i>
                    </div>
                    <div class="category-title">Sanitarios</div>
                    <div class="category-desc">Industria vitivinicola, cervecera, lechera, entre otros.</div>
                    <a href="{% url 'productos' %}" class="btn btn-outline-primary">Ver Productos</a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4">
                <div class="category-card">
                    <div class="category-icon">
                        <!-- Industria (Industriales) -->
                        <i class="fas fa-industry" style="color:#1e3a8a;"></i>
                    </div>
                    <div class="category-title">Industriales</div>
                    <div class="category-desc">Val. Bola de 1,2 y 3 cuerpos, Val. C/FLANGE, codos SCH10 - 40 CODO NPT, entre otros.</div>
                    <a href="{% url 'productos' %}" class="btn btn-outline-primary">Ver Productos</a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4">
                <div class="category-card">
                    <div class="category-icon">
                        <!-- Ícono alternativo para Tuberías -->
                        <i class="fas fa-grip-lines" style="color:#1e3a8a;"></i>
                    </div>
                    <div class="category-title">Tuberías</div>
                    <div class="category-desc">Sanitarias 304 y 316L, normas DIN - SMS</div>
                    <a href="{% url 'productos' %}" class="btn btn-outline-primary">Ver Productos</a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4">
                <div class="category-card">
                    <div class="category-icon">
                        <!-- Cañerías azul (Cañerías) -->
                        <i class="fas fa-grip-lines-vertical" style="color:#1e3a8a;"></i>
                    </div>
                    <div class="category-title">Cañerías</div>
                    <div class="category-desc">Calidad 304 y 316L de SCH10 - SCH40</div>
                    <a href="{% url 'productos' %}" class="btn btn-outline-primary">Ver Productos</a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4">
                <div class="category-card">
                    <div class="category-icon">
                        <!-- Ícono de acople para Polipropileno -->
                        <i class="fas fa-puzzle-piece" style="color:#1e3a8a;"></i>
                    </div>
                    <div class="category-title">Polipropileno</div>
                    <div class="category-desc">LINEA DE ACOPLES CAMLOCK  A, B, C, D, E, F, DC Y DP.</div>
                    <a href="{% url 'productos' %}" class="btn btn-outline-primary">Ver Productos</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
{% if productos_destacados %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="display-5 fw-bold mb-3">Productos Destacados</h2>
                <p class="lead text-muted">
                    Los productos más solicitados por nuestros clientes
                </p>
            </div>
        </div>
        
        <div class="row g-4">
            {% for producto in productos_destacados %}
            <div class="col-lg-4 col-md-6">
                <div class="product-card card h-100">
                    {% if producto.imagen %}
                    <img src="{{ producto.imagen.url }}" class="card-img-top" alt="{{ producto.nombre }}" style="height: 250px; object-fit: cover;">
                    {% else %}
                    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 250px;">
                        <i class="fas fa-image text-muted" style="font-size: 3rem;"></i>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <h6 class="card-title">{{ producto.nombre }}</h6>
                        <p class="card-text text-muted small">{{ producto.descripcion|truncatechars:100 }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="h5 text-primary mb-0">${{ producto.precio_por_unidad|floatformat:0 }}</span>
                            <a href="#" class="btn btn-primary btn-sm">Ver Detalles</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'productos' %}" class="btn btn-primary btn-lg">
                <i class="fas fa-list me-2"></i>Ver Todos los Productos
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section id="contacto" class="cta-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="display-6 fw-bold mb-4 text-center">Contáctenos</h2>
                <p class="text-center mb-4">Complete el formulario y nos pondremos en contacto con usted a la brevedad.</p>
                    <form method="post" action="{% url 'home' %}" class="bg-white p-4 rounded shadow border border-3" style="color:#1e3a8a; border-color:#1e3a8a;" id="contact-form">
                        {% csrf_token %}
                        <div class="row mb-3">
                            <div class="col-12">
                                <label for="nombre" class="form-label fw-bold">Nombre <span class="text-danger">*</span></label>
                                <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Ingrese su nombre completo" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label for="direccion" class="form-label fw-bold">Dirección</label>
                                <input type="text" name="direccion" id="direccion" class="form-control" placeholder="Ingrese su dirección (opcional)">
                            </div>
                            <div class="col-md-6">
                                <label for="comuna" class="form-label fw-bold">Comuna</label>
                                <input type="text" name="comuna" id="comuna" class="form-control" placeholder="Ingrese la comuna (opcional)">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label for="ciudad" class="form-label fw-bold">Ciudad</label>
                                <input type="text" name="ciudad" id="ciudad" class="form-control" placeholder="Ingrese la ciudad (opcional)">
                            </div>
                            <div class="col-md-6">
                                <label for="giro" class="form-label fw-bold">Actividad Económica / Giro</label>
                                <input type="text" name="giro" id="giro" class="form-control" placeholder="Ingrese su actividad económica (opcional)">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label for="email" class="form-label fw-bold">Email <span class="text-danger">*</span></label>
                                <input type="email" name="email" id="email" class="form-control" placeholder="correo@ejemplo.com" required>
                            </div>
                            <div class="col-md-6">
                                <label for="telefono" class="form-label fw-bold">Teléfono <span class="text-danger">*</span></label>
                                <input type="tel" name="telefono" id="telefono" class="form-control" placeholder="+56 9 1234 5678" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="mensaje" class="form-label fw-bold">Mensaje <span class="text-danger">*</span></label>
                            <textarea name="mensaje" id="mensaje" class="form-control" rows="4" placeholder="Escriba su mensaje aquí..." required></textarea>
                        </div>
                        {% if error_message %}
                            <div class="alert alert-danger mb-3 fw-bold border border-danger text-center" style="background:#fee2e2; color:#991b1b;">
                                <i class="fas fa-exclamation-circle me-2"></i>{{ error_message }}
                            </div>
                        {% endif %}
                        <div class="text-center">
                            <button type="submit" class="btn btn-warning fw-bold px-5 py-2 btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>ENVIAR MENSAJE
                            </button>
                        </div>
                        {% if success %}
                            <div class="alert alert-success mt-3 fw-bold border border-success text-center" style="background:#d1fae5; color:#065f46;">
                                <i class="fas fa-check-circle me-2"></i>{{ success }}
                            </div>
                        {% endif %}
                    </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Add animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe elements for animation
    document.querySelectorAll('.feature-card, .category-card, .product-card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
    
    // Mostrar notificación cuando se envía el formulario exitosamente
    {% if success %}
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof Swal !== 'undefined') {
            Swal.fire({
                icon: 'success',
                title: '¡Mensaje enviado!',
                text: '{{ success|escapejs }}',
                confirmButtonText: 'Aceptar',
                timer: 5000,
                timerProgressBar: true,
                customClass: {
                    confirmButton: 'btn btn-primary px-4'
                },
                buttonsStyling: false
            });
        }
    });
    {% endif %}
</script>
{% endblock %}
